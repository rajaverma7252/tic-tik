import{a as h}from"./chunk-N4BPRQ53.js";import{a as M}from"./chunk-EETTIGGR.js";import{E as w,H as I,I as L,J as _,K as f,L as d,M as P,N as S,O,P as y,Q as u,R as T,S as x,X as q,d as k,ga as N,o as b,s as D,t as v,y as p,z as C}from"./chunk-CI7RB4IY.js";var m=k(M());function B(o,s){if(o&1){let c=S();f(0,"div",4)(1,"button",5),O("click",function(){let t=D(c),e=t.$implicit,a=t.$index,n=y();return v(n.onOption(a+1,e))}),u(2),d()()}if(o&2){let c=s.$index,i=y();p(),w("disabled",i.isDisabled(c+1)),p(),T(c+1)}}var F=(()=>{let s=class s{constructor(i){this.router=i,this.playerDetails=sessionStorage.getItem("playerDetails"),this.currentOrder=Number(sessionStorage.getItem("currentOrder")),this.questionList=sessionStorage.getItem("questionList"),this.optionsList=[],this.optionCount=0,this.playerPosition=0,this.playerName="",this.disabledList=[],!this.playerDetails||!this.currentOrder||!this.questionList?this.router.navigate(["/home"]):(this.playerDetails=JSON.parse(this.playerDetails),this.questionList=JSON.parse(this.questionList),this.currentQuestion=this.questionList.find(e=>e.order==this.currentOrder),this.optionCount=this.playerDetails.length*10,this.playerPosition=1,this.playerName=this.playerDetails[this.playerPosition-1].name,h.questionsDetail.find(e=>e.questionId==this.currentQuestion.id).optionsData.forEach(e=>{let a=h.optionDetails.find(n=>n.optionId==e.optionId);this.optionsList.push({optionId:a.optionId,optionText:a.optionText,postText:e.postText})}),this.optionsList.sort(()=>Math.random()-.5),this.optionsList.splice(this.optionCount))}onOption(i,t){let e=new Audio;e.src="./assets/mp3/click.wav",e.play(),m.default.fire({title:t.optionText+" "+t.postText,text:"\u0915\u0943\u092A\u092F\u093E \u091A\u093F\u0924\u094D\u0930 \u0915\u0947 \u0906\u0927\u093E\u0930 \u092A\u0930 \u0930\u0947\u091F\u093F\u0902\u0917 \u0915\u093E \u091A\u092F\u0928 \u0915\u0930\u0947\u0902\u0964",imageUrl:"./assets/images/"+t.optionId+".jpeg",imageWidth:200,imageHeight:200,backdrop:!1,showCancelButton:!0,confirmButtonColor:"green",cancelButtonColor:"#d33",confirmButtonText:"Good",cancelButtonText:"Bad"}).then(a=>{let n=this.playerDetails[this.playerPosition-1];if(a.isConfirmed?this.playerDetails[this.playerPosition-1].rating=(n?.rating||0)+1:this.playerDetails[this.playerPosition-1].rating=(n?.rating||0)-1,this.playerPosition==this.playerDetails.length&&this.currentOrder!=h.totalQuestion)sessionStorage.setItem("currentOrder",this.currentOrder+1),sessionStorage.setItem("playerDetails",JSON.stringify(this.playerDetails)),this.router.navigate(["/home/questions"]);else if(this.playerPosition==this.playerDetails.length&&this.currentOrder==h.totalQuestion){let g=this.playerDetails.reduce((r,l)=>!r.length||l.rating>r[0].rating?[l]:(l.rating===r[0].rating&&r.push(l),r),[]);m.default.fire({title:this.playerDetails.length>1?g.length==1?g[0].name.toUpperCase()+" Wins":"It's tie between "+g.length+" players":"",html:`Player(s) Rating ${this.generatePlayerListHTML()}`,icon:"success",backdrop:!1}).then(r=>{r.isConfirmed&&m.default.fire({title:"Thank You for playing!",text:"Please feel free to share your thoughts, experiences or any suggestions for further improvement via email at rajaverma7252@gmail.com. Your input is highly valued and appreciated.",icon:"success",backdrop:!1}).then(l=>{l.isConfirmed&&(sessionStorage.removeItem("playerDetails"),sessionStorage.removeItem("currentOrder"),sessionStorage.removeItem("questionList"),this.router.navigate(["/home"]))})})}else this.disabledList.push(i),this.playerPosition+=1,this.playerName=n.name})}isDisabled(i){return!!this.disabledList.includes(i)}generatePlayerListHTML(){let i=`
      <table style="width: 100%;" class="mt-2">
        <thead>
          <tr>
            <th style="border: 2px solid #a5dc86;">S.No.</th>
            <th style="border: 2px solid #a5dc86;">Name</th>
            <th style="border: 2px solid #a5dc86;">Rating</th>
          </tr>
        </thead>
        <tbody>
    `;return this.playerDetails.forEach(t=>{i+=`
          <tr>
            <td style="border: 2px solid #a5dc86;">${t.id}</td>
            <td style="border: 2px solid #a5dc86;">${t.name.toUpperCase()}</td>
            <td style="border: 2px solid #a5dc86;">${t.rating}</td>
          </tr>
      `}),i+=`
        </tbody>
      </table>
    `,i}};s.\u0275fac=function(t){return new(t||s)(C(N))},s.\u0275cmp=b({type:s,selectors:[["app-options"]],standalone:!0,features:[q],decls:8,vars:2,consts:[[1,"row","mt-4","mb-5"],[1,"col-sm-12","d-flex","align-items-center","justify-content-center","mb-3","player-name"],[1,"name-color"],[1,"col-sm-12","d-flex","align-items-center","justify-content-center","mb-4","question-text"],[1,"d-flex","align-items-center","justify-content-center","mt-2","mb-2","width-calc"],["type","button",1,"btn","btn-warning","fixed-hw",3,"click","disabled"]],template:function(t,e){t&1&&(f(0,"div",0)(1,"div",1)(2,"span",2),u(3),d(),u(4),d(),P(5,"div",3),L(6,B,3,2,"div",4,I),d()),t&2&&(p(3),x("",e.playerName.toUpperCase()," :"),p(),x("\xA0",e.currentQuestion.text," "),p(2),_(e.optionsList))},styles:[".player-name[_ngcontent-%COMP%]{color:#fff;font-weight:700;text-align:center}.name-color[_ngcontent-%COMP%]{color:#4aff07}.width-calc[_ngcontent-%COMP%]{width:20%}.fixed-hw[_ngcontent-%COMP%]{height:50px;width:50px;font-weight:700}"]});let o=s;return o})();export{F as OptionsComponent};
